<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L+Y - Master Languages</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            margin-bottom: 10px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .tagline {
            font-size: 1.2rem;
            color: white;
            opacity: 0.9;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .streak {
            color: #ff6b6b;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .language-selection {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .language-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            min-width: 200px;
        }

        .language-card:hover, .language-card.active {
            transform: translateY(-10px);
            border: 2px solid rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.2);
        }

        .language-flag {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .language-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .lesson-grid {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .lesson-grid.active {
            display: grid;
        }

        .lesson-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid #4ecdc4;
            position: relative;
            margin: 0 auto;
        }

        .lesson-item:hover {
            transform: scale(1.1);
        }

        .lesson-item.completed {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border-color: #44a08d;
        }

        .lesson-item.locked {
            background: rgba(0, 0, 0, 0.3);
            border-color: #666;
            cursor: not-allowed;
        }

        .lesson-number {
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }

        .lesson-interface {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
            color: #333;
        }

        .lesson-interface.active {
            display: block;
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .lesson-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #333;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-area {
            text-align: center;
            margin: 40px 0;
        }

        .question-text {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #333;
        }

        .word-display {
            font-size: 3rem;
            font-weight: bold;
            color: #4ecdc4;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .translation {
            font-size: 1.5rem;
            color: #666;
            margin: 20px 0;
        }

        .pronunciation {
            font-size: 1.2rem;
            color: #888;
            font-style: italic;
            margin: 10px 0;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1.1rem;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option.wrong {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .speak-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }

        .feedback {
            text-align: center;
            margin: 20px 0;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .feedback.correct {
            color: #28a745;
        }

        .feedback.wrong {
            color: #dc3545;
        }

        .completion-screen {
            display: none;
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-top: 30px;
        }

        .completion-screen.active {
            display: block;
        }

        .celebration {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        .bounce {
            animation: bounce 2s infinite;
        }

        @media (max-width: 768px) {
            .logo {
                font-size: 3rem;
            }
            
            .stats-bar {
                gap: 15px;
            }
            
            .language-card {
                min-width: 150px;
                padding: 20px;
            }
            
            .lesson-item {
                width: 60px;
                height: 60px;
            }
        }

        .hidden {
            display: none !important;
        }

        .teaching-mode {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .review-mode {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">L+Y</div>
            <div class="tagline">Master Hebrew & Albanian</div>
        </div>

        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value streak" id="streak">0</div>
                <div>Day Streak</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="totalLessons">0</div>
                <div>Lessons</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="currentLevel">1</div>
                <div>Level</div>
            </div>
        </div>

        <div class="main-content">
            <div class="language-selection">
                <div class="language-card" data-language="hebrew">
                    <div class="language-flag">🇮🇱</div>
                    <div class="language-name">Hebrew</div>
                    <div>עברית</div>
                </div>
                <div class="language-card" data-language="albanian">
                    <div class="language-flag">🇦🇱</div>
                    <div class="language-name">Albanian</div>
                    <div>Shqip</div>
                </div>
            </div>

            <div class="lesson-grid" id="hebrewLessons"></div>
            <div class="lesson-grid" id="albanianLessons"></div>

            <div class="lesson-interface" id="lessonInterface">
                <div class="lesson-header">
                    <div class="lesson-title" id="lessonTitle">Lesson 1</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <div class="question-area">
                    <div class="question-text" id="questionText">Learn these words:</div>
                    <div class="word-display" id="wordDisplay">שלום</div>
                    <div class="pronunciation" id="pronunciation">[sha-LOHM]</div>
                    <div class="translation" id="translation">Hello</div>
                    
                    <button class="btn speak-btn" id="speakBtn">🔊</button>
                    
                    <div class="options" id="options"></div>
                    <div class="feedback" id="feedback"></div>
                </div>

                <div class="controls">
                    <button class="btn btn-secondary" id="skipBtn">Skip</button>
                    <button class="btn" id="continueBtn">Continue</button>
                    <button class="btn" id="checkBtn" style="display:none;">Check</button>
                </div>
            </div>

            <div class="completion-screen" id="completionScreen">
                <div class="celebration bounce">🎉</div>
                <h2>Lesson Complete!</h2>
                <p>Great job! You've completed another lesson.</p>
                <div class="controls">
                    <button class="btn" id="nextLessonBtn">Next Lesson</button>
                    <button class="btn btn-secondary" id="backToMapBtn">Back to Map</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class LanguageLearningApp {
            constructor() {
                this.currentLanguage = null;
                this.currentLesson = 0;
                this.currentQuestion = 0;
                this.isTeachingMode = true;
                this.score = 0;
                this.totalQuestions = 0;
                this.progress = this.loadProgress();
                
                this.initializeLessons();
                this.initializeEventListeners();
                this.updateStats();
                this.checkDailyStreak();
            }

            initializeLessons() {
                this.lessons = {
                    hebrew: this.generateHebrewLessons(),
                    albanian: this.generateAlbanianLessons()
                };
            }

            // UPDATED: now creates 100 lessons with 5–6 words each (alternating 6,5)
            generateHebrewLessons() {
                const lessons = [];
                const words = [
                    // Basic greetings and common words (Lessons 1-20)
                    {word: "שלום", pronunciation: "[sha-LOHM]", translation: "Hello/Peace"},
                    {word: "בוקר טוב", pronunciation: "[BOH-ker tohv]", translation: "Good morning"},
                    {word: "לילה טוב", pronunciation: "[LIE-lah tohv]", translation: "Good night"},
                    {word: "תודה", pronunciation: "[toh-DAH]", translation: "Thank you"},
                    {word: "בבקשה", pronunciation: "[beh-vah-ka-SHAH]", translation: "Please"},
                    {word: "כן", pronunciation: "[ken]", translation: "Yes"},
                    {word: "לא", pronunciation: "[loh]", translation: "No"},
                    {word: "אני", pronunciation: "[ah-NEE]", translation: "I"},
                    {word: "אתה", pronunciation: "[ah-TAH]", translation: "You (male)"},
                    {word: "את", pronunciation: "[aht]", translation: "You (female)"},
                    {word: "הוא", pronunciation: "[hoo]", translation: "He"},
                    {word: "היא", pronunciation: "[hee]", translation: "She"},
                    {word: "אנחנו", pronunciation: "[ah-NAHKH-noo]", translation: "We"},
                    {word: "אתם", pronunciation: "[ah-TEM]", translation: "You (plural male)"},
                    {word: "אתן", pronunciation: "[ah-TEN]", translation: "You (plural female)"},
                    {word: "הם", pronunciation: "[hem]", translation: "They (male)"},
                    {word: "הן", pronunciation: "[hen]", translation: "They (female)"},
                    {word: "מה", pronunciation: "[mah]", translation: "What"},
                    {word: "איפה", pronunciation: "[EH-foh]", translation: "Where"},
                    {word: "מתי", pronunciation: "[mah-TIE]", translation: "When"},
                    
                    // Family and relationships (Lessons 21-35)
                    {word: "משפחה", pronunciation: "[mish-pah-KHAH]", translation: "Family"},
                    {word: "אבא", pronunciation: "[AH-bah]", translation: "Dad"},
                    {word: "אמא", pronunciation: "[EE-mah]", translation: "Mom"},
                    {word: "בן", pronunciation: "[ben]", translation: "Son"},
                    {word: "בת", pronunciation: "[baht]", translation: "Daughter"},
                    {word: "אח", pronunciation: "[ahkh]", translation: "Brother"},
                    {word: "אחות", pronunciation: "[ah-KHOHT]", translation: "Sister"},
                    {word: "סבא", pronunciation: "[SAH-bah]", translation: "Grandfather"},
                    {word: "סבתא", pronunciation: "[sahv-TAH]", translation: "Grandmother"},
                    {word: "חבר", pronunciation: "[khah-VER]", translation: "Friend (male)"},
                    {word: "חברה", pronunciation: "[khah-veh-RAH]", translation: "Friend (female)"},
                    {word: "בעל", pronunciation: "[BAH-ahl]", translation: "Husband"},
                    {word: "אשה", pronunciation: "[ee-SHAH]", translation: "Wife"},
                    {word: "ילד", pronunciation: "[YEH-led]", translation: "Child/Boy"},
                    {word: "ילדה", pronunciation: "[yal-DAH]", translation: "Girl"},
                    
                    // Colors (Lessons 36-45)
                    {word: "צבע", pronunciation: "[TSEH-vah]", translation: "Color"},
                    {word: "אדום", pronunciation: "[ah-DOHM]", translation: "Red"},
                    {word: "כחול", pronunciation: "[kah-KHOHL]", translation: "Blue"},
                    {word: "ירוק", pronunciation: "[yah-ROHK]", translation: "Green"},
                    {word: "צהוב", pronunciation: "[tsah-HOHV]", translation: "Yellow"},
                    {word: "שחור", pronunciation: "[shah-KHOR]", translation: "Black"},
                    {word: "לבן", pronunciation: "[lah-VAHN]", translation: "White"},
                    {word: "סגול", pronunciation: "[sah-GOHL]", translation: "Purple"},
                    {word: "כתום", pronunciation: "[kah-TOHM]", translation: "Orange"},
                    {word: "ורוד", pronunciation: "[vah-ROHD]", translation: "Pink"},
                    
                    // Numbers (Lessons 46-60)
                    {word: "מספר", pronunciation: "[mis-PAHR]", translation: "Number"},
                    {word: "אחד", pronunciation: "[eh-KHAHD]", translation: "One"},
                    {word: "שתיים", pronunciation: "[shtah-YEEM]", translation: "Two"},
                    {word: "שלוש", pronunciation: "[shah-LOHSH]", translation: "Three"},
                    {word: "ארבע", pronunciation: "[ahr-BAH]", translation: "Four"},
                    {word: "חמש", pronunciation: "[khah-MESH]", translation: "Five"},
                    {word: "שש", pronunciation: "[shesh]", translation: "Six"},
                    {word: "שבע", pronunciation: "[SHEH-vah]", translation: "Seven"},
                    {word: "שמונה", pronunciation: "[shmoh-NEH]", translation: "Eight"},
                    {word: "תשע", pronunciation: "[TAY-shah]", translation: "Nine"},
                    {word: "עשר", pronunciation: "[EH-ser]", translation: "Ten"},
                    {word: "אחד עשר", pronunciation: "[ah-KHAHD ah-SAHR]", translation: "Eleven"},
                    {word: "שתים עשרה", pronunciation: "[shtaym es-REH]", translation: "Twelve"},
                    {word: "עשרים", pronunciation: "[es-REEM]", translation: "Twenty"},
                    {word: "מאה", pronunciation: "[meh-AH]", translation: "Hundred"},
                    
                    // Food and drinks (Lessons 61-80)
                    {word: "אוכל", pronunciation: "[OH-khel]", translation: "Food"},
                    {word: "מים", pronunciation: "[MAH-yeem]", translation: "Water"},
                    {word: "חלב", pronunciation: "[khah-LAHV]", translation: "Milk"},
                    {word: "לחם", pronunciation: "[LEH-khem]", translation: "Bread"},
                    {word: "בשר", pronunciation: "[bah-SAHR]", translation: "Meat"},
                    {word: "דג", pronunciation: "[dahg]", translation: "Fish"},
                    {word: "עוף", pronunciation: "[ohf]", translation: "Chicken"},
                    {word: "ביצה", pronunciation: "[bay-TSAH]", translation: "Egg"},
                    {word: "גבינה", pronunciation: "[gvee-NAH]", translation: "Cheese"},
                    {word: "פירות", pronunciation: "[pey-ROHT]", translation: "Fruits"},
                    {word: "תפוח", pronunciation: "[tah-POO-akh]", translation: "Apple"},
                    {word: "בננה", pronunciation: "[bah-NAH-nah]", translation: "Banana"},
                    {word: "תפוז", pronunciation: "[tah-POOZ]", translation: "Orange"},
                    {word: "ירקות", pronunciation: "[yeh-rah-KOHT]", translation: "Vegetables"},
                    {word: "עגבנייה", pronunciation: "[ahg-vah-nee-YAH]", translation: "Tomato"},
                    {word: "מלפפון", pronunciation: "[mel-ah-feh-FOHN]", translation: "Cucumber"},
                    {word: "בצל", pronunciation: "[bah-TSAHL]", translation: "Onion"},
                    {word: "קפה", pronunciation: "[kah-FEH]", translation: "Coffee"},
                    {word: "תה", pronunciation: "[teh]", translation: "Tea"},
                    {word: "מיץ", pronunciation: "[meets]", translation: "Juice"},
                    
                    // Daily activities (Lessons 81-100)
                    {word: "ללכת", pronunciation: "[lah-LEH-khet]", translation: "To go"},
                    {word: "לבוא", pronunciation: "[lah-VOH]", translation: "To come"},
                    {word: "לאכול", pronunciation: "[leh-eh-KHOHL]", translation: "To eat"},
                    {word: "לשתות", pronunciation: "[lish-TOHT]", translation: "To drink"},
                    {word: "לישון", pronunciation: "[lee-SHOHN]", translation: "To sleep"},
                    {word: "לקום", pronunciation: "[lah-KOOM]", translation: "To get up"},
                    {word: "לעבוד", pronunciation: "[lah-ah-VOHD]", translation: "To work"},
                    {word: "ללמוד", pronunciation: "[lil-MOHD]", translation: "To learn"},
                    {word: "לקרוא", pronunciation: "[lik-ROH]", translation: "To read"},
                    {word: "לכתוב", pronunciation: "[likh-TOHV]", translation: "To write"},
                    {word: "לדבר", pronunciation: "[leh-dah-BEHR]", translation: "To speak"},
                    {word: "לשמוע", pronunciation: "[lish-MOH-ah]", translation: "To hear"},
                    {word: "לראות", pronunciation: "[lir-OHT]", translation: "To see"},
                    {word: "לרוץ", pronunciation: "[lah-ROOTS]", translation: "To run"},
                    {word: "ללכת ברגל", pronunciation: "[lah-LEH-khet beh-REH-gel]", translation: "To walk"},
                    {word: "לשחק", pronunciation: "[leh-sah-KHEK]", translation: "To play"},
                    {word: "לשיר", pronunciation: "[lah-SHEER]", translation: "To sing"},
                    {word: "לרקוד", pronunciation: "[lir-KOHD]", translation: "To dance"},
                    {word: "לבשל", pronunciation: "[leh-vah-SHEHL]", translation: "To cook"},
                    {word: "לנקות", pronunciation: "[leh-nah-KOHT]", translation: "To clean"}
                ];

                const totalLessons = 100;
                for (let i = 0; i < totalLessons; i++) {
                    const chunkSize = i % 2 === 0 ? 6 : 5; // 6,5,6,5,...
                    const start = (i * 5) % words.length; // deterministic rotation with slight overlap
                    const wordsForLesson = [];
                    for (let k = 0; k < chunkSize; k++) {
                        wordsForLesson.push(words[(start + k) % words.length]);
                    }
                    lessons.push({
                        id: i + 1,
                        title: `Lesson ${i + 1}`,
                        words: wordsForLesson
                    });
                }

                return lessons;
            }

            // UPDATED: now creates 100 lessons with 5–6 words each (alternating 6,5)
            generateAlbanianLessons() {
                const lessons = [];
                const words = [
                    // Basic greetings (Lessons 1-20)
                    {word: "Përshëndetje", pronunciation: "[per-shen-DET-ye]", translation: "Hello"},
                    {word: "Mirëmëngjes", pronunciation: "[mee-ruh-MEN-gyes]", translation: "Good morning"},
                    {word: "Mirëdita", pronunciation: "[mee-ruh-DEE-ta]", translation: "Good day"},
                    {word: "Mirëmbrëma", pronunciation: "[mee-ruh-MBREM-a]", translation: "Good evening"},
                    {word: "Natën e mirë", pronunciation: "[NA-ten e MEE-ruh]", translation: "Good night"},
                    {word: "Faleminderit", pronunciation: "[fa-le-meen-DE-reet]", translation: "Thank you"},
                    {word: "Ju lutem", pronunciation: "[yoo LOO-tem]", translation: "Please"},
                    {word: "Po", pronunciation: "[po]", translation: "Yes"},
                    {word: "Jo", pronunciation: "[yo]", translation: "No"},
                    {word: "Unë", pronunciation: "[OO-nuh]", translation: "I"},
                    {word: "Ti", pronunciation: "[tee]", translation: "You (singular)"},
                    {word: "Ai", pronunciation: "[ah-EE]", translation: "He"},
                    {word: "Ajo", pronunciation: "[ah-YO]", translation: "She"},
                    {word: "Ne", pronunciation: "[neh]", translation: "We"},
                    {word: "Ju", pronunciation: "[yoo]", translation: "You (plural)"},
                    {word: "Ata", pronunciation: "[ah-TA]", translation: "They (male)"},
                    {word: "Ato", pronunciation: "[ah-TO]", translation: "They (female)"},
                    {word: "Çfarë", pronunciation: "[chfa-RUH]", translation: "What"},
                    {word: "Ku", pronunciation: "[koo]", translation: "Where"},
                    {word: "Kur", pronunciation: "[koor]", translation: "When"},
                    
                    // Family (Lessons 21-35)
                    {word: "Familje", pronunciation: "[fa-MEEL-ye]", translation: "Family"},
                    {word: "Baba", pronunciation: "[BA-ba]", translation: "Dad"},
                    {word: "Mama", pronunciation: "[MA-ma]", translation: "Mom"},
                    {word: "Bir", pronunciation: "[beer]", translation: "Son"},
                    {word: "Vajzë", pronunciation: "[VAH-y-zuh]", translation: "Daughter"},
                    {word: "Vëlla", pronunciation: "[VUH-la]", translation: "Brother"},
                    {word: "Motër", pronunciation: "[MO-tur]", translation: "Sister"},
                    {word: "Gjysh", pronunciation: "[gysh]", translation: "Grandfather"},
                    {word: "Gjyshe", pronunciation: "[GYSH-e]", translation: "Grandmother"},
                    {word: "Mik", pronunciation: "[meek]", translation: "Friend (male)"},
                    {word: "Mike", pronunciation: "[MEE-ke]", translation: "Friend (female)"},
                    {word: "Bashkëshort", pronunciation: "[bash-kuh-SHORT]", translation: "Husband"},
                    {word: "Bashkëshorte", pronunciation: "[bash-kuh-SHOR-te]", translation: "Wife"},
                    {word: "Fëmijë", pronunciation: "[fuh-MEE-yuh]", translation: "Child"},
                    {word: "Djalë", pronunciation: "[DYA-luh]", translation: "Boy"},
                    
                    // Colors (Lessons 36-45)
                    {word: "Ngjyrë", pronunciation: "[NGYEE-ruh]", translation: "Color"},
                    {word: "Kuq", pronunciation: "[kook]", translation: "Red"},
                    {word: "Blu", pronunciation: "[bloo]", translation: "Blue"},
                    {word: "Gjelbër", pronunciation: "[gel-BUR]", translation: "Green"},
                    {word: "Verdhë", pronunciation: "[VER-dhuh]", translation: "Yellow"},
                    {word: "Zi", pronunciation: "[zee]", translation: "Black"},
                    {word: "Bardhë", pronunciation: "[BAR-dhuh]", translation: "White"},
                    {word: "Vjollcë", pronunciation: "[VYOL-tse]", translation: "Purple"},
                    {word: "Portokalli", pronunciation: "[por-to-KA-lee]", translation: "Orange"},
                    {word: "Rozë", pronunciation: "[RO-zuh]", translation: "Pink"},
                    
                    // Numbers (Lessons 46-60)
                    {word: "Numër", pronunciation: "[NOO-mur]", translation: "Number"},
                    {word: "Një", pronunciation: "[nyuh]", translation: "One"},
                    {word: "Dy", pronunciation: "[dee]", translation: "Two"},
                    {word: "Tre", pronunciation: "[treh]", translation: "Three"},
                    {word: "Katër", pronunciation: "[KA-tur]", translation: "Four"},
                    {word: "Pesë", pronunciation: "[PE-suh]", translation: "Five"},
                    {word: "Gjashtë", pronunciation: "[GYASH-tuh]", translation: "Six"},
                    {word: "Shtatë", pronunciation: "[SHTA-tuh]", translation: "Seven"},
                    {word: "Tetë", pronunciation: "[TE-tuh]", translation: "Eight"},
                    {word: "Nëntë", pronunciation: "[NUN-tuh]", translation: "Nine"},
                    {word: "Dhjetë", pronunciation: "[DHYE-tuh]", translation: "Ten"},
                    {word: "Njëmbëdhjetë", pronunciation: "[nyum-buh-DHYE-tuh]", translation: "Eleven"},
                    {word: "Dymbëdhjetë", pronunciation: "[deem-buh-DHYE-tuh]", translation: "Twelve"},
                    {word: "Njëzet", pronunciation: "[nyuh-ZET]", translation: "Twenty"},
                    {word: "Njëqind", pronunciation: "[nyuh-KEEND]", translation: "Hundred"},
                    
                    // Food and drinks (Lessons 61-80)
                    {word: "Ushqim", pronunciation: "[oosh-KEEM]", translation: "Food"},
                    {word: "Ujë", pronunciation: "[OO-yuh]", translation: "Water"},
                    {word: "Qumësht", pronunciation: "[koo-MUSHT]", translation: "Milk"},
                    {word: "Bukë", pronunciation: "[BOO-kuh]", translation: "Bread"},
                    {word: "Mish", pronunciation: "[meesh]", translation: "Meat"},
                    {word: "Peshk", pronunciation: "[peshk]", translation: "Fish"},
                    {word: "Pulë", pronunciation: "[POO-luh]", translation: "Chicken"},
                    {word: "Vezë", pronunciation: "[VE-zuh]", translation: "Egg"},
                    {word: "Djathë", pronunciation: "[DYA-thuh]", translation: "Cheese"},
                    {word: "Fruta", pronunciation: "[FROO-ta]", translation: "Fruits"},
                    {word: "Mollë", pronunciation: "[MO-luh]", translation: "Apple"},
                    {word: "Banane", pronunciation: "[ba-NA-ne]", translation: "Banana"},
                    {word: "Portokall", pronunciation: "[por-to-KAL]", translation: "Orange"},
                    {word: "Perime", pronunciation: "[pe-REE-me]", translation: "Vegetables"},
                    {word: "Domate", pronunciation: "[do-MA-te]", translation: "Tomato"},
                    {word: "Kastravec", pronunciation: "[kas-tra-VETS]", translation: "Cucumber"},
                    {word: "Qepë", pronunciation: "[KE-puh]", translation: "Onion"},
                    {word: "Kafe", pronunciation: "[ka-FE]", translation: "Coffee"},
                    {word: "Çaj", pronunciation: "[chai]", translation: "Tea"},
                    {word: "Lëng", pronunciation: "[lung]", translation: "Juice"},
                    
                    // Daily activities (Lessons 81-100)
                    {word: "Të shkosh", pronunciation: "[tuh SHKO-sh]", translation: "To go"},
                    {word: "Të vish", pronunciation: "[tuh veesh]", translation: "To come"},
                    {word: "Të hash", pronunciation: "[tuh hash]", translation: "To eat"},
                    {word: "Të pish", pronunciation: "[tuh peesh]", translation: "To drink"},
                    {word: "Të flesh", pronunciation: "[tuh flesh]", translation: "To sleep"},
                    {word: "Të çohesh", pronunciation: "[tuh CHO-hesh]", translation: "To get up"},
                    {word: "Të punosh", pronunciation: "[tuh poo-NOSH]", translation: "To work"},
                    {word: "Të mësosh", pronunciation: "[tuh muh-SOSH]", translation: "To learn"},
                    {word: "Të lexosh", pronunciation: "[tuh le-KOSH]", translation: "To read"},
                    {word: "Të shkruash", pronunciation: "[tuh shkroo-ASH]", translation: "To write"},
                    {word: "Të flasësh", pronunciation: "[tuh fla-SUSH]", translation: "To speak"},
                    {word: "Të dëgjosh", pronunciation: "[tuh dug-YOSH]", translation: "To hear"},
                    {word: "Të shikosh", pronunciation: "[tuh shee-KOSH]", translation: "To see"},
                    {word: "Të vraposh", pronunciation: "[tuh vra-POSH]", translation: "To run"},
                    {word: "Të ecësh", pronunciation: "[tuh e-TSUSH]", translation: "To walk"},
                    {word: "Të luash", pronunciation: "[tuh LOO-ash]", translation: "To play"},
                    {word: "Të këndosh", pronunciation: "[tuh kun-DOSH]", translation: "To sing"},
                    {word: "Të vallëzosh", pronunciation: "[tuh va-luh-ZOSH]", translation: "To dance"},
                    {word: "Të gatuash", pronunciation: "[tuh ga-too-ASH]", translation: "To cook"},
                    {word: "Të pastrosh", pronunciation: "[tuh pas-TROSH]", translation: "To clean"}
                ];

                const totalLessons = 100;
                for (let i = 0; i < totalLessons; i++) {
                    const chunkSize = i % 2 === 0 ? 6 : 5; // 6,5,6,5,...
                    const start = (i * 5) % words.length;
                    const wordsForLesson = [];
                    for (let k = 0; k < chunkSize; k++) {
                        wordsForLesson.push(words[(start + k) % words.length]);
                    }
                    lessons.push({
                        id: i + 1,
                        title: `Lesson ${i + 1}`,
                        words: wordsForLesson
                    });
                }

                return lessons;
            }

            initializeEventListeners() {
                // Language selection
                document.querySelectorAll('.language-card').forEach(card => {
                    card.addEventListener('click', () => {
                        this.selectLanguage(card.dataset.language);
                    });
                });

                // Control buttons
                document.getElementById('continueBtn').addEventListener('click', () => {
                    this.nextQuestion();
                });

                document.getElementById('checkBtn').addEventListener('click', () => {
                    this.checkAnswer();
                });

                document.getElementById('skipBtn').addEventListener('click', () => {
                    this.skipQuestion();
                });

                document.getElementById('speakBtn').addEventListener('click', () => {
                    this.speakWord();
                });

                document.getElementById('nextLessonBtn').addEventListener('click', () => {
                    this.startNextLesson();
                });

                document.getElementById('backToMapBtn').addEventListener('click', () => {
                    this.backToLessonMap();
                });
            }

            selectLanguage(language) {
                this.currentLanguage = language;
                
                // Update UI
                document.querySelectorAll('.language-card').forEach(card => {
                    card.classList.remove('active');
                });
                document.querySelector(`[data-language="${language}"]`).classList.add('active');

                document.querySelectorAll('.lesson-grid').forEach(grid => {
                    grid.classList.remove('active');
                });
                document.getElementById(`${language}Lessons`).classList.add('active');

                this.renderLessonMap(language);
            }

            renderLessonMap(language) {
                const grid = document.getElementById(`${language}Lessons`);
                grid.innerHTML = '';

                this.lessons[language].forEach((lesson, index) => {
                    const lessonItem = document.createElement('div');
                    lessonItem.className = 'lesson-item';
                    
                    const completed = this.progress[language] && this.progress[language].completedLessons.includes(index + 1);
                    const locked = index > 0 && (!this.progress[language] || !this.progress[language].completedLessons.includes(index));
                    
                    if (completed) {
                        lessonItem.classList.add('completed');
                    } else if (locked) {
                        lessonItem.classList.add('locked');
                    }

                    lessonItem.innerHTML = `<div class="lesson-number">${index + 1}</div>`;
                    
                    if (!locked) {
                        lessonItem.addEventListener('click', () => {
                            this.startLesson(index);
                        });
                    }

                    grid.appendChild(lessonItem);
                });
            }

            startLesson(lessonIndex) {
                this.currentLesson = lessonIndex;
                this.currentQuestion = 0;
                this.isTeachingMode = true;
                this.score = 0;
                this.totalQuestions = 0;

                const lesson = this.lessons[this.currentLanguage][lessonIndex];
                document.getElementById('lessonTitle').textContent = lesson.title;

                // Hide lesson map, show lesson interface
                document.querySelectorAll('.lesson-grid').forEach(grid => {
                    grid.classList.remove('active');
                });
                document.getElementById('lessonInterface').classList.add('active');
                document.getElementById('completionScreen').classList.remove('active');

                this.showQuestion();
            }

            showQuestion() {
                const lesson = this.lessons[this.currentLanguage][this.currentLesson];
                const word = lesson.words[this.currentQuestion % lesson.words.length];

                // Update progress bar
                const totalSteps = lesson.words.length * 2; // Teaching + Review for each word
                const currentStep = this.currentQuestion + (this.isTeachingMode ? 0 : lesson.words.length);
                const progress = (currentStep / totalSteps) * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;

                if (this.isTeachingMode) {
                    this.showTeachingMode(word);
                } else {
                    this.showReviewMode(word);
                }
            }

            showTeachingMode(word) {
                document.getElementById('questionText').innerHTML = `
                    <div class="teaching-mode">
                        📚 Learn this word:
                    </div>
                `;
                
                document.getElementById('wordDisplay').textContent = word.word;
                document.getElementById('pronunciation').textContent = word.pronunciation;
                document.getElementById('translation').textContent = word.translation;
                
                document.getElementById('options').innerHTML = '';
                document.getElementById('feedback').innerHTML = '';
                
                document.getElementById('continueBtn').style.display = 'inline-block';
                document.getElementById('checkBtn').style.display = 'none';
                document.getElementById('continueBtn').disabled = false;
            }

            showReviewMode(word) {
                document.getElementById('questionText').innerHTML = `
                    <div class="review-mode">
                        🧠 What does this mean?
                    </div>
                `;
                
                document.getElementById('wordDisplay').textContent = word.word;
                document.getElementById('pronunciation').textContent = word.pronunciation;
                document.getElementById('translation').textContent = '';
                
                this.generateOptions(word);
                document.getElementById('feedback').innerHTML = '';
                
                document.getElementById('continueBtn').style.display = 'none';
                document.getElementById('checkBtn').style.display = 'inline-block';
                document.getElementById('checkBtn').disabled = false;
            }

            generateOptions(correctWord) {
                const allWords = this.lessons[this.currentLanguage].map(l => l.words).flat();
                
                // Get wrong options from other words
                const wrongOptions = allWords
                    .filter(w => w.translation !== correctWord.translation)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3)
                    .map(w => w.translation);

                const options = [...wrongOptions, correctWord.translation]
                    .sort(() => Math.random() - 0.5);

                const optionsContainer = document.getElementById('options');
                optionsContainer.innerHTML = '';

                options.forEach(option => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.textContent = option;
                    optionElement.addEventListener('click', () => {
                        document.querySelectorAll('.option').forEach(opt => {
                            opt.style.pointerEvents = 'none';
                        });
                        this.selectOption(optionElement, option === correctWord.translation);
                    });
                    optionsContainer.appendChild(optionElement);
                });
            }

            selectOption(element, isCorrect) {
                this.totalQuestions++;
                
                if (isCorrect) {
                    element.classList.add('correct');
                    this.score++;
                    document.getElementById('feedback').innerHTML = '<div class="feedback correct">✅ Correct! Great job!</div>';
                } else {
                    element.classList.add('wrong');
                    document.getElementById('feedback').innerHTML = '<div class="feedback wrong">❌ Incorrect. Try again next time!</div>';
                    
                    // Highlight correct answer
                    const lesson = this.lessons[this.currentLanguage][this.currentLesson];
                    const word = lesson.words[this.currentQuestion % lesson.words.length];
                    document.querySelectorAll('.option').forEach(opt => {
                        if (opt.textContent === word.translation) {
                            opt.classList.add('correct');
                        }
                    });
                }

                document.getElementById('continueBtn').style.display = 'inline-block';
                document.getElementById('checkBtn').style.display = 'none';
            }

            checkAnswer() {
                // Using option click; nothing needed here.
            }

            nextQuestion() {
                const lesson = this.lessons[this.currentLanguage][this.currentLesson];
                
                if (this.isTeachingMode) {
                    // Move to next word in teaching mode
                    this.currentQuestion++;
                    if (this.currentQuestion >= lesson.words.length) {
                        // Switch to review mode
                        this.isTeachingMode = false;
                        this.currentQuestion = 0;
                    }
                    this.showQuestion();
                } else {
                    // Move to next word in review mode
                    this.currentQuestion++;
                    if (this.currentQuestion >= lesson.words.length) {
                        // Lesson complete
                        this.completeLesson();
                    } else {
                        this.showQuestion();
                    }
                }
            }

            skipQuestion() {
                this.nextQuestion();
            }

            speakWord() {
                const lesson = this.lessons[this.currentLanguage][this.currentLesson];
                const word = lesson.words[this.currentQuestion % lesson.words.length];
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(word.word);
                    
                    // Set language for pronunciation
                    if (this.currentLanguage === 'hebrew') {
                        utterance.lang = 'he-IL';
                    } else if (this.currentLanguage === 'albanian') {
                        utterance.lang = 'sq-AL';
                    }
                    
                    utterance.rate = 0.8;
                    speechSynthesis.speak(utterance);
                }
            }

            completeLesson() {
                // Update progress
                if (!this.progress[this.currentLanguage]) {
                    this.progress[this.currentLanguage] = {
                        completedLessons: [],
                        currentStreak: 0,
                        totalLessons: 0
                    };
                }

                const lessonNumber = this.currentLesson + 1;
                if (!this.progress[this.currentLanguage].completedLessons.includes(lessonNumber)) {
                    this.progress[this.currentLanguage].completedLessons.push(lessonNumber);
                    this.progress[this.currentLanguage].totalLessons++;
                }

                this.updateDailyStreak();
                this.saveProgress();
                this.updateStats();

                // Show completion screen
                document.getElementById('lessonInterface').classList.remove('active');
                document.getElementById('completionScreen').classList.add('active');
            }

            startNextLesson() {
                const nextLessonIndex = this.currentLesson + 1;
                if (nextLessonIndex < this.lessons[this.currentLanguage].length) {
                    this.startLesson(nextLessonIndex);
                } else {
                    this.backToLessonMap();
                }
            }

            backToLessonMap() {
                document.getElementById('lessonInterface').classList.remove('active');
                document.getElementById('completionScreen').classList.remove('active');
                this.renderLessonMap(this.currentLanguage);
                document.getElementById(`${this.currentLanguage}Lessons`).classList.add('active');
            }

            loadProgress() {
                // Use IP-based storage simulation
                const ipKey = this.getIPKey();
                const saved = localStorage.getItem(`ly_progress_${ipKey}`);
                return saved ? JSON.parse(saved) : {
                    hebrew: { completedLessons: [], currentStreak: 0, totalLessons: 0, lastActivity: null },
                    albanian: { completedLessons: [], currentStreak: 0, totalLessons: 0, lastActivity: null },
                    globalStreak: 0,
                    lastActiveDate: null
                };
            }

            saveProgress() {
                const ipKey = this.getIPKey();
                localStorage.setItem(`ly_progress_${ipKey}`, JSON.stringify(this.progress));
            }

            getIPKey() {
                // Simulate IP-based key (in real app, would use actual IP)
                let ipKey = localStorage.getItem('ly_ip_simulation');
                if (!ipKey) {
                    ipKey = 'ip_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('ly_ip_simulation', ipKey);
                }
                return ipKey;
            }

            updateStats() {
                const totalLessons = (this.progress.hebrew?.totalLessons || 0) + 
                                   (this.progress.albanian?.totalLessons || 0);
                const currentLevel = Math.floor(totalLessons / 10) + 1;
                
                document.getElementById('streak').textContent = this.progress.globalStreak || 0;
                document.getElementById('totalLessons').textContent = totalLessons;
                document.getElementById('currentLevel').textContent = currentLevel;
            }

            checkDailyStreak() {
                const today = new Date().toDateString();
                const lastActive = this.progress.lastActiveDate;
                
                if (lastActive === today) {
                    return;
                }
                
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (lastActive === yesterday.toDateString()) {
                    this.progress.globalStreak = (this.progress.globalStreak || 0) + 1;
                } else if (lastActive && lastActive !== today) {
                    this.progress.globalStreak = 1;
                } else {
                    this.progress.globalStreak = 1;
                }
                
                this.progress.lastActiveDate = today;
                this.saveProgress();
                this.updateStats();
            }

            updateDailyStreak() {
                this.checkDailyStreak();
            }
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new LanguageLearningApp();
        });
    </script>
</body>
</html>
